* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  --bg-dark: #0a0a0a;
  --bg-medium: #1a1a1a;
  --bg-light: #2a2a2a;
  --accent: #ff4444;
  --accent-glow: rgba(255, 68, 68, 0.4);
  --text-primary: #ffffff;
  --text-secondary: #888888;
  --button-off: #333333;
  --button-on: #ff4444;
  --knob-track: #333333;
  --knob-fill: #ff4444;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  background: linear-gradient(135deg, var(--bg-dark) 0%, var(--bg-medium) 100%);
  color: var(--text-primary);
  min-height: 100vh;
  padding: 1rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

.container {
  max-width: 1800px;
  width: 100%;
}


.controller {
  display: grid;
  grid-template-columns: 2fr 1fr 2fr;
  gap: 2rem;
  background: var(--bg-medium);
  padding: 2rem;
  border-radius: 1rem;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
}

.deck {
  display: flex;
  flex-direction: column;
  gap: 0;
}

.center-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
}

.center-section > * {
  display: flex;
  justify-content: center;
  gap: 0.5rem;
  margin-bottom: 0.5rem;
}

.center-row-4 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.3rem 3rem;
  width: 200px;
  padding-bottom: 12px;
  position: relative;
}

.center-row-2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.4rem 3rem;
  width: 200px;
  position: relative;
  margin-top: 16px;
}

/* "DECK" label above the buttons */
.center-row-2::before {
  content: 'DECK';
  position: absolute;
  top: -14px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 0.55rem;
  font-weight: 700;
  color: #888;
  letter-spacing: 0.5px;
}

.center-view-area {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.4rem 3rem;
  width: 200px;
}

.center-load {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 0.7rem 3rem;
  width: 200px;
}

#center-shift {
  width: 140px;
  display: block;
}

#center-shift .button {
  width: 100%;
}

.center-browser {
  flex-direction: column;
  align-items: center;
  gap: 0.3rem;
}

.center-section .button {
  width: 100%;
  height: 24px;
  min-height: unset;
  aspect-ratio: auto;
  border-radius: 4px;
  font-size: 0.6rem;
}

/* Deck selection buttons - clean and minimal */
#button-76-ch6,
#button-80-ch6,
#button-77-ch6,
#button-81-ch6 {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0;
  position: relative;
}

/* Ensure buttons themselves have proper positioning context */
#button-76-ch6 .button,
#button-80-ch6 .button,
#button-77-ch6 .button,
#button-81-ch6 .button {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Button labels "1" and "2" - properly centered */
#button-76-ch6 .button::before,
#button-80-ch6 .button::before {
  content: '1';
}

#button-77-ch6 .button::before,
#button-81-ch6 .button::before {
  content: '2';
}

#button-76-ch6 .button::before,
#button-80-ch6 .button::before,
#button-77-ch6 .button::before,
#button-81-ch6 .button::before {
  font-size: 0.8rem;
  font-weight: 700;
  color: white;
  z-index: 10;
}

/* Remove circular gradient */
#button-76-ch6 .button::after,
#button-80-ch6 .button::after,
#button-77-ch6 .button::after,
#button-81-ch6 .button::after {
  display: none;
}

/* Light indicators - full width bars below buttons */
#button-76-ch6::after,
#button-80-ch6::after,
#button-77-ch6::after,
#button-81-ch6::after {
  content: '';
  width: 100%;
  height: 6px;
  background: #2a2a2a;
  border: 1px solid #444;
  border-radius: 2px;
  margin-top: 6px;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.6);
}

/* Active lights glow */
#button-76-ch6.active::after,
#button-80-ch6.active::after,
#button-77-ch6.active::after,
#button-81-ch6.active::after {
  background: #ff4444;
  border-color: #ff4444;
  box-shadow: 0 0 8px rgba(255, 68, 68, 0.6);
}

/* Number labels "3" and "4" - centered between lights */
.center-row-4::before,
.center-row-4::after {
  position: absolute;
  font-size: 0.65rem;
  font-weight: 600;
  color: #888;
  left: 50%;
  transform: translateX(-50%);
}

.center-row-4::before {
  content: '3';
  top: 34px;
}

.center-row-4::after {
  content: '4';
  bottom: 13px;
}

/* Hide default labels */
#button-76-ch6 .control-label,
#button-80-ch6 .control-label,
#button-77-ch6 .control-label,
#button-81-ch6 .control-label {
  display: none;
}

/* DECK buttons - stencil style "3" and "4" */
#button-114-ch2 .button,
#button-114-ch3 .button {
  background: var(--button-off);
}

/* Black inset rectangle for stencil effect */
#button-114-ch2 .button::before,
#button-114-ch3 .button::before {
  content: '';
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  left: 4px;
  right: 4px;
  height: 16px;
  background: rgba(0, 0, 0, 0.7);
  border-radius: 3px;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
  z-index: 5;
  pointer-events: none;
}

/* Stencil numbers */
#button-114-ch2 .button::after {
  content: '3';
}

#button-114-ch3 .button::after {
  content: '4';
}

#button-114-ch2 .button::after,
#button-114-ch3 .button::after {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.7rem;
  font-weight: 900;
  letter-spacing: 0.3px;
  color: var(--button-off);
  mix-blend-mode: lighten;
  z-index: 10;
  pointer-events: none;
}

#button-114-ch2 .button.active,
#button-114-ch3 .button.active {
  background: #4488ff;
  border-color: #4488ff;
  box-shadow: 0 0 20px rgba(68, 136, 255, 0.4), 0 4px 12px rgba(0, 0, 0, 0.3);
}

#button-114-ch2 .button.active::after,
#button-114-ch3 .button.active::after {
  color: #4488ff;
}

/* Hide default labels for deck buttons */
#button-114-ch2 .control-label,
#button-114-ch3 .control-label {
  display: none;
}

/* Center LOAD buttons - smaller with stencil effect */
#button-70-ch6 .button,
#button-71-ch6 .button {
  height: 32px;
  background: var(--button-off);
}

#button-70-ch6 .button::before,
#button-71-ch6 .button::before {
  content: '';
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  left: 4px;
  right: 4px;
  height: 20px;
  background: rgba(0, 0, 0, 0.7);
  border-radius: 3px;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
  z-index: 5;
  pointer-events: none;
}

#button-70-ch6 .button::after,
#button-71-ch6 .button::after {
  content: 'LOAD';
}

#button-70-ch6 .button::after,
#button-71-ch6 .button::after {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.6rem;
  font-weight: 900;
  letter-spacing: 0.3px;
  color: var(--button-off);
  mix-blend-mode: lighten;
  z-index: 10;
  pointer-events: none;
  width: 100%;
  text-align: center;
  background: none;
  border-radius: 0;
}

#button-70-ch6 .button.active,
#button-71-ch6 .button.active {
  background: #ff4444;
  border-color: #ff4444;
  box-shadow: 0 0 20px rgba(255, 68, 68, 0.4), 0 4px 12px rgba(0, 0, 0, 0.3);
}

#button-70-ch6 .button.active::after,
#button-71-ch6 .button.active::after {
  color: #ff4444;
}

/* Hide labels below LOAD buttons */
#button-70-ch6 .control-label,
#button-71-ch6 .control-label {
  display: none;
}

.center-browser .knob-container {
  width: 110px;
  height: 110px;
}

.center-browser .button {
  width: 50px;
  height: 20px;
  min-height: unset;
  aspect-ratio: auto;
  border-radius: 3px;
  font-size: 0.55rem;
}

/* Two-line labels for center section buttons */
#button-65-ch6 .control-label,
#button-101-ch6 .control-label,
#button-103-ch6 .control-label {
  white-space: pre-line;
  line-height: 1.2;
  font-size: 0.6rem;
}

/* Remove circular texture from back/utility buttons and shift */
#button-101-ch6 .button::after,
#button-103-ch6 .button::after,
#button-64-ch6 .button::after {
  display: none;
}

/* SHIFT button - stencil style with white box */
#button-64-ch6 .button {
  background: var(--button-off);
}

#button-64-ch6 .control-label {
  display: none;
}

/* White inset rectangle for stencil effect */
#button-64-ch6 .button::before {
  content: '';
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  left: 4px;
  right: 4px;
  height: 16px;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 3px;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
  z-index: 5;
  pointer-events: none;
}

/* SHIFT text in stencil */
#button-64-ch6 .button::after {
  content: 'SHIFT';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.55rem;
  font-weight: 800;
  color: #333333;
  text-shadow: none;
  letter-spacing: 0.5px;
  mix-blend-mode: multiply;
  z-index: 10;
  pointer-events: none;
}

#button-64-ch6 .button.active {
  background: #4488ff;
  border-color: #4488ff;
  box-shadow: 0 0 20px rgba(68, 136, 255, 0.4), 0 4px 12px rgba(0, 0, 0, 0.3);
}

#button-64-ch6 .button.active::after {
  color: #4488ff;
}

.slider-container {
  width: 40px;
  height: 120px;
  display: flex;
  justify-content: center;
  align-items: center;
}

.slider-track {
  position: relative;
  width: 8px;
  height: 100%;
  background: #000000;
  border-radius: 4px;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
}

.slider-fill {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 0%;
  background: var(--knob-fill);
  border-radius: 4px;
  transition: height 0.1s ease;
}

.slider-thumb {
  position: absolute;
  bottom: 0%;
  left: 50%;
  transform: translate(-50%, 50%);
  width: 75px;
  height: 24px;
  background: linear-gradient(to bottom,
    #000000 0%,
    #000000 33%,
    #ffffff 33%,
    #ffffff 67%,
    #000000 67%,
    #000000 100%);
  border: 1px solid #666666;
  border-radius: 2px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
  transition: bottom 0.1s ease;
  z-index: 3;
}

.slider-container {
  position: relative;
}

.slider-container::before,
.slider-container::after {
  content: '';
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  width: 100px;
  height: 2px;
  background: white;
  z-index: 2;
}

.slider-container::before {
  top: 0;
}

.slider-container::after {
  bottom: 0;
}

.slider-track::before {
  content: '';
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 100px;
  height: 2px;
  background: #ff4444;
  z-index: 2;
}

.slider-track::after {
  content: '';
  position: absolute;
  left: 50%;
  top: 25%;
  transform: translate(-50%, -50%);
  width: 100px;
  height: 2px;
  background: #ff4444;
  z-index: 2;
  box-shadow: 0 60px 0 0 #ff4444;
}

.center-section .control {
  gap: 0.3rem;
}

.center-section .control-label {
  font-size: 0.55rem;
}

.fx-knobs {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1.5rem;
  padding: 1.5rem 1rem 0.5rem 1rem;
  background: var(--bg-dark);
  border-radius: 0.5rem 0.5rem 0 0;
}

/* FX knobs - labels below knobs instead of above */
.fx-knobs .control-label {
  order: 1;
  text-align: right;
  width: 100%;
}

.deck-buttons {
  display: grid;
  grid-template-columns: repeat(8, 1fr);
  gap: 0.75rem;
  padding: 0 1rem 1rem 1rem;
  background: var(--bg-dark);
  border-radius: 0 0 0.5rem 0.5rem;
  align-items: center;
}

/* Hide labels for FX buttons below the knobs */
#button-71-ch4 .control-label,
#button-72-ch4 .control-label,
#button-73-ch4 .control-label,
#button-74-ch4 .control-label,
#button-67-ch4 .control-label,
#button-71-ch5 .control-label,
#button-72-ch5 .control-label,
#button-73-ch5 .control-label,
#button-74-ch5 .control-label,
#button-67-ch5 .control-label {
  display: none;
}

.deck-buttons .button {
  aspect-ratio: auto;
  height: 40px;
  min-height: unset;
}

.deck-buttons .button::after {
  display: none;
}

/* Row 1: FX buttons - all same width (2 cols each) */
#button-71-ch4,
#button-72-ch4,
#button-73-ch4,
#button-74-ch4,
#button-71-ch5,
#button-72-ch5,
#button-73-ch5,
#button-74-ch5 {
  grid-column: span 2;
}

/* Row 2: SYNC button (2 cols) */
#button-88-ch0,
#button-88-ch1 {
  grid-column: span 2;
}

/* Row 2: SLIP, CENSOR, and PARAM buttons - all same alignment */
#button-64-ch0,
#button-21-ch0,
#button-64-ch1,
#button-21-ch1,
#button-param-left-ch0,
#button-param-right-ch0,
#button-param-left-ch1,
#button-param-right-ch1 {
  grid-column: span 1;
  align-self: start;
}

#button-64-ch0 .button,
#button-21-ch0 .button,
#button-64-ch1 .button,
#button-21-ch1 .button,
#button-param-left-ch0 .button,
#button-param-right-ch0 .button,
#button-param-left-ch1 .button,
#button-param-right-ch1 .button {
  height: 32px;
}

/* PARAM buttons - disabled styling */
#button-param-left-ch0,
#button-param-right-ch0,
#button-param-left-ch1,
#button-param-right-ch1 {
  pointer-events: none;
}

#button-param-left-ch0 .button,
#button-param-right-ch0 .button,
#button-param-left-ch1 .button,
#button-param-right-ch1 .button {
  background: #1a1a1a;
  cursor: not-allowed;
  opacity: 0.3;
}

/* Shift labels for SLIP and CENSOR buttons */
#button-64-ch0::after,
#button-64-ch1::after,
#button-21-ch0::after,
#button-21-ch1::after {
  content: '';
  display: flex;
  align-items: center;
  justify-content: center;
  margin-top: 0.3rem;
  width: 100%;
  height: 16px;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 3px;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
  position: relative;
  font-size: 0.5rem;
  font-weight: 800;
  color: #333333;
  letter-spacing: 0.3px;
}

#button-64-ch0::after,
#button-64-ch1::after {
  content: 'REL.';
}

#button-21-ch0::after,
#button-21-ch1::after {
  content: 'INT.';
}

/* PARAM. 2 shift label (disabled) - positioned to span both buttons */
#button-param-left-ch0::after,
#button-param-left-ch1::after {
  content: 'PARAM. 2';
  display: flex;
  align-items: center;
  justify-content: center;
  width: calc(200% + 0.75rem);
  height: 16px;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 3px;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
  position: absolute;
  bottom: -29px;
  left: 0;
  font-size: 0.5rem;
  font-weight: 800;
  color: #333333;
  letter-spacing: 0.3px;
  opacity: 0.3;
}

/* Ensure both PARAM buttons are aligned */
#button-param-left-ch0,
#button-param-right-ch0,
#button-param-left-ch1,
#button-param-right-ch1 {
  position: relative;
}

/* Hide the right button's shift label */
#button-param-right-ch0::after,
#button-param-right-ch1::after {
  display: none;
}

#button-param-left-ch0 .button::before,
#button-param-left-ch1 .button::before {
  content: '◀';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 0.8rem;
  color: white;
  z-index: 10;
}

#button-param-right-ch0 .button::before,
#button-param-right-ch1 .button::before {
  content: '▶';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 0.8rem;
  color: white;
  z-index: 10;
}

/* Hide right PARAM.1 label visually but keep in flow for alignment */
#button-param-right-ch0 .control-label,
#button-param-right-ch1 .control-label {
  visibility: hidden;
}

/* Position left PARAM.1 label to span both buttons */
#button-param-left-ch0 .control-label,
#button-param-left-ch1 .control-label {
  position: relative;
  left: calc(50% + 0.375rem);
}

/* Row 2: AUTO LOOP knob (2 cols) */
#knob-23-ch0,
#knob-23-ch1 {
  grid-column: span 2;
}

/* Row 3: Pad mode buttons (2 cols each) */
#button-27-ch0,
#button-30-ch0,
#button-32-ch0,
#button-34-ch0,
#button-27-ch1,
#button-30-ch1,
#button-32-ch1,
#button-34-ch1 {
  grid-column: span 2;
}

/* Make pad mode buttons smaller */
#button-27-ch0 .button,
#button-30-ch0 .button,
#button-32-ch0 .button,
#button-34-ch0 .button,
#button-27-ch1 .button,
#button-30-ch1 .button,
#button-32-ch1 .button,
#button-34-ch1 .button {
  height: 32px;
}

.deck-buttons .control {
  gap: 0.5rem;
}

/* SYNC buttons - bigger with dual stencil labels */
#button-88-ch0 .button,
#button-88-ch1 .button {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: var(--button-off);
}

/* Circular inset stencil for SYNC */
#button-88-ch0 .button::before,
#button-88-ch1 .button::before {
  content: '';
  position: absolute;
  top: 5px;
  left: 5px;
  right: 5px;
  bottom: 5px;
  background: rgba(0, 0, 0, 0.7);
  border-radius: 50%;
  box-shadow: inset 0 2px 6px rgba(0, 0, 0, 0.6);
  z-index: 5;
  pointer-events: none;
}

/* OFF box - much lighter so it's clearly visible */
#button-88-ch0 .button::after,
#button-88-ch1 .button::after {
  content: '';
  position: absolute;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  width: 36px;
  height: 11px;
  background: #888888;
  border: 2px solid #999999;
  border-radius: 2px;
  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.5), 0 2px 4px rgba(0, 0, 0, 0.4);
  z-index: 6;
  pointer-events: none;
}

#button-88-ch0 .button.active::after,
#button-88-ch1 .button.active::after {
  background: #6699ff;
  border-color: #77aaff;
}

/* SYNC button text labels */
.stencil-text {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  font-weight: 900;
  letter-spacing: 0.3px;
  color: var(--button-off);
  mix-blend-mode: lighten;
  z-index: 10;
  pointer-events: none;
  text-align: center;
  background: none;
}

.stencil-text-top {
  top: 13px;
  font-size: 0.75rem;
  letter-spacing: -0.5px;
}

.stencil-text-bottom {
  bottom: 10px;
  font-size: 0.55rem;
  z-index: 7;
  color: #000000;
  mix-blend-mode: normal;
  text-shadow: 0 0 1px rgba(255, 255, 255, 0.3);
  font-weight: 900;
}

#button-88-ch0 .button.active .stencil-text-top,
#button-88-ch1 .button.active .stencil-text-top {
  color: #4488ff;
}

/* OFF text stays black even when active */
#button-88-ch0 .button.active .stencil-text-bottom,
#button-88-ch1 .button.active .stencil-text-bottom {
  color: #000000;
}

/* Hide labels below SYNC buttons */
#button-88-ch0 .control-label,
#button-88-ch1 .control-label {
  display: none;
}

/* FX buttons (FX 1, 2, 3) - smaller rectangular buttons */
#button-71-ch4 .button,
#button-72-ch4 .button,
#button-73-ch4 .button,
#button-71-ch5 .button,
#button-72-ch5 .button,
#button-73-ch5 .button {
  height: 30px;
  border-radius: 6px;
  background: var(--button-off);
}

#button-71-ch4 .button.active,
#button-72-ch4 .button.active,
#button-73-ch4 .button.active,
#button-71-ch5 .button.active,
#button-72-ch5 .button.active,
#button-73-ch5 .button.active {
  background: #ff4444;
  border-color: #ff4444;
  box-shadow: 0 0 20px rgba(255, 68, 68, 0.4), 0 4px 12px rgba(0, 0, 0, 0.3);
}

/* FX buttons (FX 1, 2, 3, FX ASSIGN) - ON + FX SELECT layout */
#button-71-ch4 .button,
#button-72-ch4 .button,
#button-73-ch4 .button,
#button-74-ch4 .button,
#button-71-ch5 .button,
#button-72-ch5 .button,
#button-73-ch5 .button,
#button-74-ch5 .button {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 6px 4px;
}

/* "ON" text on the left */
.fx-on-text {
  font-size: 0.65rem;
  font-weight: 800;
  color: #000000;
}

/* "FX SELECT" container with black stencil background */
.fx-select-stencil {
  flex: 1;
  margin-left: 4px;
  position: relative;
  background: rgba(0, 0, 0, 0.7);
  border-radius: 3px;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding: 2px 5px;
}

/* FX SELECT text with cutout effect */
.fx-select-stencil::after {
  content: 'FX SELECT';
  font-size: 0.6rem;
  font-weight: 900;
  color: var(--button-off);
  letter-spacing: 0.3px;
  mix-blend-mode: lighten;
  text-shadow: 0 0 1px rgba(255, 255, 255, 0.3);
}

/* FX MODE text for TAP buttons */
.fx-mode-stencil::after {
  content: 'FX MODE';
}

/* FX SELECT and FX MODE text turns red when button is active */
#button-71-ch4 .button.active .fx-select-stencil::after,
#button-72-ch4 .button.active .fx-select-stencil::after,
#button-73-ch4 .button.active .fx-select-stencil::after,
#button-74-ch4 .button.active .fx-select-stencil::after,
#button-71-ch5 .button.active .fx-select-stencil::after,
#button-72-ch5 .button.active .fx-select-stencil::after,
#button-73-ch5 .button.active .fx-select-stencil::after,
#button-74-ch5 .button.active .fx-select-stencil::after {
  color: #ff4444;
}

/* FX ASSIGN buttons - rectangular buttons with orange/amber color */
#button-74-ch4 .button,
#button-74-ch5 .button {
  height: 30px;
  border-radius: 6px;
}

#button-74-ch4 .button.active,
#button-74-ch5 .button.active {
  background: #ff8800;
  border-color: #ff8800;
  box-shadow: 0 0 20px rgba(255, 136, 0, 0.4), 0 4px 12px rgba(0, 0, 0, 0.3);
}

/* Remove circular gradient effect from pad mode buttons */
#button-27-ch0 .button,
#button-30-ch0 .button,
#button-32-ch0 .button,
#button-34-ch0 .button,
#button-27-ch1 .button,
#button-30-ch1 .button,
#button-32-ch1 .button,
#button-34-ch1 .button {
  background: var(--button-off);
}

/* Pad mode buttons - black inset rectangle with text cut out */
#button-27-ch0 .button::before,
#button-30-ch0 .button::before,
#button-32-ch0 .button::before,
#button-34-ch0 .button::before,
#button-27-ch1 .button::before,
#button-30-ch1 .button::before,
#button-32-ch1 .button::before,
#button-34-ch1 .button::before {
  content: '';
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  left: 4px;
  right: 4px;
  height: 20px;
  background: rgba(0, 0, 0, 0.7);
  border-radius: 3px;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
  z-index: 5;
  pointer-events: none;
}

#button-27-ch0 .button::after,
#button-27-ch1 .button::after {
  content: 'HOT CUE';
}

#button-30-ch0 .button::after,
#button-30-ch1 .button::after {
  content: 'ROLL';
}

#button-32-ch0 .button::after,
#button-32-ch1 .button::after {
  content: 'SLICER';
}

#button-34-ch0 .button::after,
#button-34-ch1 .button::after {
  content: 'SAMPLER';
}

#button-27-ch0 .button::after,
#button-30-ch0 .button::after,
#button-32-ch0 .button::after,
#button-34-ch0 .button::after,
#button-27-ch1 .button::after,
#button-30-ch1 .button::after,
#button-32-ch1 .button::after,
#button-34-ch1 .button::after {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.6rem;
  font-weight: 900;
  letter-spacing: 0.3px;
  color: var(--button-off);
  mix-blend-mode: lighten;
  z-index: 10;
  pointer-events: none;
  width: 100%;
  text-align: center;
  background: none;
  border-radius: 0;
}

#button-27-ch0 .button.active::after,
#button-30-ch0 .button.active::after,
#button-32-ch0 .button.active::after,
#button-34-ch0 .button.active::after,
#button-27-ch1 .button.active::after,
#button-30-ch1 .button.active::after,
#button-32-ch1 .button.active::after,
#button-34-ch1 .button.active::after {
  color: #4488ff;
}

#button-27-ch0 .button.active,
#button-30-ch0 .button.active,
#button-32-ch0 .button.active,
#button-34-ch0 .button.active,
#button-27-ch1 .button.active,
#button-30-ch1 .button.active,
#button-32-ch1 .button.active,
#button-34-ch1 .button.active {
  background: #4488ff;
  border-color: #4488ff;
  box-shadow: 0 0 20px rgba(68, 136, 255, 0.4), 0 4px 12px rgba(0, 0, 0, 0.3);
}

/* Hide top labels for pad mode buttons */
#button-27-ch0 .control-label,
#button-30-ch0 .control-label,
#button-32-ch0 .control-label,
#button-34-ch0 .control-label,
#button-27-ch1 .control-label,
#button-30-ch1 .control-label,
#button-32-ch1 .control-label,
#button-34-ch1 .control-label {
  display: none;
}

/* Add shift labels below pad mode buttons - white stencil style */
#button-27-ch0::after,
#button-30-ch0::after,
#button-32-ch0::after,
#button-34-ch0::after,
#button-27-ch1::after,
#button-30-ch1::after,
#button-32-ch1::after,
#button-34-ch1::after {
  content: '';
  display: flex;
  align-items: center;
  justify-content: center;
  margin-top: 0.3rem;
  width: 100%;
  height: 16px;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 3px;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
  position: relative;
  font-size: 0.5rem;
  font-weight: 800;
  color: #333333;
  letter-spacing: 0.3px;
}

#button-27-ch0::after,
#button-27-ch1::after {
  content: 'HOT LOOP';
}

#button-30-ch0::after,
#button-30-ch1::after {
  content: 'AUTO LOOP';
}

#button-32-ch0::after,
#button-32-ch1::after {
  content: 'MANUAL LOOP';
  font-size: 0.45rem;
}

#button-34-ch0::after,
#button-34-ch1::after {
  content: 'VELOCITY';
}

.performance-pads {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-template-rows: repeat(2, 1fr);
  gap: 0.75rem;
  padding: 1.5rem;
  margin-top: 1.5rem;
  background: var(--bg-dark);
  border-radius: 0.5rem;
}

.performance-pads .button {
  min-height: 80px;
  border-radius: 12px;
}

.performance-pads .control-label {
  display: none;
}

.control {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
}

.control-label {
  font-size: 0.65rem;
  color: var(--text-secondary);
  text-align: center;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  order: -1;
}

.button {
  width: 100%;
  aspect-ratio: 1;
  min-height: 50px;
  border-radius: 8px;
  background: var(--button-off);
  border: 2px solid var(--bg-light);
  transition: all 0.15s ease;
  cursor: pointer;
  position: relative;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.button::after {
  content: '';
  position: absolute;
  inset: 8px;
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.1), transparent);
}

.button.active {
  background: var(--button-on);
  border-color: var(--accent);
  box-shadow: 0 0 20px var(--accent-glow), 0 4px 12px rgba(0, 0, 0, 0.3);
  transform: scale(0.95);
}

.knob-container {
  position: relative;
  width: 90px;
  height: 90px;
}

.knob-container.clicked::after {
  content: '';
  position: absolute;
  inset: -4px;
  border-radius: 50%;
  border: 3px solid #ff0000;
  box-shadow: 0 0 12px rgba(255, 0, 0, 0.6);
  pointer-events: none;
  animation: pulse-ring 0.3s ease-out;
}

@keyframes pulse-ring {
  0% {
    transform: scale(0.8);
    opacity: 0;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

/* FX knobs styling */
.fx-knobs .knob-container {
  width: 100px;
  height: 100px;
  position: relative;
}

/* Outer white dashed ring - only in 7:00-5:00 range for FX knobs */
#knob-2-ch4 .knob-container::before,
#knob-4-ch4 .knob-container::before,
#knob-6-ch4 .knob-container::before,
#knob-2-ch5 .knob-container::before,
#knob-4-ch5 .knob-container::before,
#knob-6-ch5 .knob-container::before {
  content: '' !important;
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: conic-gradient(
    white 0deg,
    white 50deg,
    transparent 50deg,
    transparent 60deg,
    white 60deg,
    white 100deg,
    transparent 100deg,
    transparent 110deg,
    white 110deg,
    white 150deg,
    transparent 150deg,
    transparent 210deg,
    white 210deg,
    white 250deg,
    transparent 250deg,
    transparent 260deg,
    white 260deg,
    white 300deg,
    transparent 300deg,
    transparent 310deg,
    white 310deg,
    white 350deg,
    transparent 350deg,
    transparent 360deg
  ) !important;
  mask: radial-gradient(circle, transparent 46%, black 46%, black 50%, transparent 50%) !important;
  -webkit-mask: radial-gradient(circle, transparent 46%, black 46%, black 50%, transparent 50%) !important;
  pointer-events: none;
  z-index: 1;
}

/* Full ring for BEATS, AUTO LOOP, and BROWSER knobs */
.fx-knobs #knob-0-ch4 .knob-container::before,
.fx-knobs #knob-0-ch5 .knob-container::before,
#knob-23-ch0 .knob-container::before,
#knob-23-ch1 .knob-container::before,
#knob-64-ch6 .knob-container::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: conic-gradient(
    white 0deg 50deg,
    transparent 50deg 60deg,
    white 60deg 110deg,
    transparent 110deg 120deg,
    white 120deg 170deg,
    transparent 170deg 180deg,
    white 180deg 230deg,
    transparent 230deg 240deg,
    white 240deg 290deg,
    transparent 290deg 300deg,
    white 300deg 350deg,
    transparent 350deg 360deg
  );
  mask: radial-gradient(circle, transparent 46%, black 46%, black 50%, transparent 50%);
  -webkit-mask: radial-gradient(circle, transparent 46%, black 46%, black 50%, transparent 50%);
  pointer-events: none;
  z-index: 1;
}

/* Inner solid light grey ring - thicker under handle */
.fx-knobs .knob-progress,
#knob-23-ch0 .knob-progress,
#knob-23-ch1 .knob-progress,
#knob-64-ch6 .knob-progress {
  background: none !important;
}

.fx-knobs .knob-progress::before,
#knob-23-ch0 .knob-progress::before,
#knob-23-ch1 .knob-progress::before,
#knob-64-ch6 .knob-progress::before {
  content: '';
  position: absolute;
  inset: 8px;
  border-radius: 50%;
  border: 3px solid #999999;
  pointer-events: none;
}

/* Black knob handle */
.fx-knobs .knob,
#knob-23-ch0 .knob,
#knob-23-ch1 .knob,
#knob-64-ch6 .knob {
  background: #000000;
  border: none;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.5);
}

/* White line indicator on handle */
.fx-knobs .knob::before,
#knob-23-ch0 .knob::before,
#knob-23-ch1 .knob::before,
#knob-64-ch6 .knob::before {
  content: '';
  position: absolute;
  top: 8px;
  left: 50%;
  transform: translateX(-50%);
  width: 2px;
  height: 40%;
  background: white;
  border-radius: 1px;
  box-shadow: none;
}

/* Black circle background for value */
.fx-knobs .knob-value,
#knob-23-ch0 .knob-value,
#knob-23-ch1 .knob-value,
#knob-64-ch6 .knob-value {
  background: #000000;
  border-radius: 50%;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-size: 0.8rem;
  z-index: 10;
}

/* Infinite encoder knobs (BEATS, PANEL SELECT) - hide progress arc */
#knob-0-ch4 .knob-progress,
#knob-0-ch5 .knob-progress,
#knob-64-ch6 .knob-progress {
  display: none !important;
}

/* Position marker for infinite encoders */
#knob-0-ch4 .knob::after,
#knob-0-ch5 .knob::after,
#knob-64-ch6 .knob::after {
  content: '';
  position: absolute;
  top: 6px;
  left: 50%;
  transform: translateX(-50%);
  width: 4px;
  height: 12px;
  background: #ffffff;
  border-radius: 2px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.6);
  z-index: 10;
}

.deck-buttons .knob-container {
  width: 60px;
  height: 60px;
}

.knob {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background: var(--bg-dark);
  border: 3px solid var(--knob-track);
  position: relative;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3), inset 0 2px 8px rgba(0, 0, 0, 0.5);
}

.knob::before {
  content: '';
  position: absolute;
  top: 8px;
  left: 50%;
  transform: translateX(-50%);
  width: 3px;
  height: 20px;
  background: var(--accent);
  border-radius: 2px;
  box-shadow: 0 0 10px var(--accent-glow);
}

.knob-value {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-primary);
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
}

.knob-progress {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: conic-gradient(
    var(--knob-fill) 0deg,
    var(--knob-fill) var(--progress, 0deg),
    transparent var(--progress, 0deg),
    transparent 360deg
  );
  mask: radial-gradient(circle, transparent 58%, black 58%);
  -webkit-mask: radial-gradient(circle, transparent 58%, black 58%);
}

@media (max-width: 1200px) {
  .controller {
    grid-template-columns: 1fr;
  }
}
